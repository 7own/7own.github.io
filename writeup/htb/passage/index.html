<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.74.3" />
    <meta name="description" content="">


    <link rel="icon" href="/7own.github.io/images/favicon.png" type="image/png">

    <title>Passage :: 7own</title>

    
    <link href="/7own.github.io/css/nucleus.css?1600996793" rel="stylesheet">
    <link href="/7own.github.io/css/fontawesome-all.min.css?1600996793" rel="stylesheet">
    <link href="/7own.github.io/css/hybrid.css?1600996793" rel="stylesheet">
    <link href="/7own.github.io/css/featherlight.min.css?1600996793" rel="stylesheet">
    <link href="/7own.github.io/css/perfect-scrollbar.min.css?1600996793" rel="stylesheet">
    <link href="/7own.github.io/css/auto-complete.css?1600996793" rel="stylesheet">
    <link href="/7own.github.io/css/atom-one-dark-reasonable.css?1600996793" rel="stylesheet">
    <link href="/7own.github.io/css/theme.css?1600996793" rel="stylesheet">
    <link href="/7own.github.io/css/hugo-theme.css?1600996793" rel="stylesheet">
    
    <link href="/7own.github.io/css/theme-red.css?1600996793" rel="stylesheet">
    
    

    <script src="/7own.github.io/js/jquery-3.3.1.min.js?1600996793"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="7own.github.io/writeup/htb/passage/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img src="/images/logo.png" alt="7OWN" style="width:200px;height:200px;"> 

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/7own.github.io/js/lunr.min.js?1600996793"></script>
<script type="text/javascript" src="/7own.github.io/js/auto-complete.js?1600996793"></script>
<script type="text/javascript">
    
        var baseurl = "7own.github.io";
    
</script>
<script type="text/javascript" src="/7own.github.io/js/search.js?1600996793"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="7own.github.io/basics/" title="Cheatsheet" class="dd-item 
        
        
        
        ">
      <a href="7own.github.io/basics/">
          <b>0. </b>Cheatsheet
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="7own.github.io/basics/linux/" title="Linux Cheatsheet" class="dd-item 
        
        
        
        ">
      <a href="7own.github.io/basics/linux/">
          Linux Cheatsheet
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="7own.github.io/basics/linux/nmap/" title="NMAP Cheatsheet" class="dd-item 
        
        
        
        ">
      <a href="7own.github.io/basics/linux/nmap/">
          NMAP Cheatsheet
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="7own.github.io/writeup/" title="Write up" class="dd-item 
        parent
        
        
        ">
      <a href="7own.github.io/writeup/">
          <b>1. </b>Write up
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="7own.github.io/writeup/htb/" title="HTB" class="dd-item 
        parent
        
        
        ">
      <a href="7own.github.io/writeup/htb/">
          HTB
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="7own.github.io/writeup/htb/passage/" title="Passage" class="dd-item 
        parent
        active
        
        ">
      <a href="7own.github.io/writeup/htb/passage/">
          Passage
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="7own.github.io/7own.github.io/tags"><i class='fas fa-tags'></i> Tags</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p><b><center>Try harder is the most important thing</center></b></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='7own.github.io/'>HomePage</a> > <a href='7own.github.io/writeup/'>Write up</a> > <a href='7own.github.io/writeup/htb/'>HTB</a> > Passage
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents"></nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
<div class="tags">

  <a class="tag-link" href="/7own.github.io/tags/base64">base64</a>

  <a class="tag-link" href="/7own.github.io/tags/decrypt">decrypt</a>

  <a class="tag-link" href="/7own.github.io/tags/cyberchef">cyberchef</a>

</div>

        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Passage
            </h1>
          

        



	<p><img src="/images/htb/passage/0.png" alt="Minion"></p>
<p>Let&rsquo;s start with NMAP on the IP of the box 10.10.10.206 :
<img src="/images/htb/passage/1.png" alt="Minion"></p>
<p>As we can see, HTTP is open and SSH too.
Let&rsquo;s check the website :
<img src="/images/htb/passage/2.png" alt="Minion"></p>
<p>At the end of the webpage we can see a Copyright :
<img src="/images/htb/passage/3.png" alt="Minion"></p>
<p>After googling CuteNews, we can see that there is a CMS for news feed.
Let&rsquo;s check if there is any exploit on it :
<img src="/images/htb/passage/4.png" alt="Minion">
<img src="/images/htb/passage/5.png" alt="Minion"></p>
<p>After checking the exploit, we can see that is pointing to a specific path :</p>
<pre><code>{ip}/CuteNews/cdata/users/lines
</code></pre><p><img src="/images/htb/passage/6.png" alt="Minion"></p>
<p>Let&rsquo;s check if we can access to the CuteNews folder :
<img src="/images/htb/passage/7.png" alt="Minion"></p>
<p>admin/admin don&rsquo;t work, but we can register an account.
We can access to the pannel but we can&rsquo;t do nothing on it.</p>
<p>Let&rsquo;s check if the finded exploit can open us a door :
<img src="/images/htb/passage/8.png" alt="Minion"></p>
<p>We can get a shell from the machine :
<img src="/images/htb/passage/9.png" alt="Minion">
<img src="/images/htb/passage/10.png" alt="Minion"></p>
<p>Let&rsquo;s make a webshell and upload it :</p>
<pre><code>cp /usr/share/webshells/php/php-reverse-shell.php ~/boxes/passage
---&gt; Modify the IP
</code></pre><p><img src="/images/htb/passage/11.png" alt="Minion"></p>
<p>Let&rsquo;s check if we can access to the upload dir and run the reverse shell :
<img src="/images/htb/passage/12.png" alt="Minion">
<img src="/images/htb/passage/13.png" alt="Minion">
<img src="/images/htb/passage/14.png" alt="Minion"></p>
<p>Now, we need to enumerate the accessible file to see if we have any password for an user.
After some hours of enumeration, i find some file interresting :
<img src="/images/htb/passage/15.png" alt="Minion">
<img src="/images/htb/passage/16.png" alt="Minion">
<img src="/images/htb/passage/17.png" alt="Minion">
<img src="/images/htb/passage/18.png" alt="Minion"></p>
<pre><code>cat lines
</code></pre><p><img src="/images/htb/passage/19.png" alt="Minion"></p>
<p>On the last file <em><strong>&ldquo;lines&rdquo;</strong></em>, the hash seems to be a base64, let&rsquo;s try to decrypt it :</p>
<pre><code>echo 'base64 string' | base64 -d
</code></pre><p>We find a password in the LINES file :
<img src="/images/htb/passage/20.png" alt="Minion"></p>
<blockquote>
<p>NB : To check the hash type or decrypt it, you can use CyberChef website.
There is a nice online tool.
<img src="/images/htb/passage/21.png" alt="Minion"></p>
</blockquote>
<p>Now we will try to find what&rsquo;s is the type of hash with <em><strong>CyberChef</strong></em> :
<img src="/images/htb/passage/22.png" alt="Minion"></p>
<blockquote>
<p>It seems to be a SHA256 hash.</p>
</blockquote>
<p>Let&rsquo;s try to decrypt all base64 line in this file, and decrypt the &ldquo;pass&rdquo; with SHA256 Decrypter
<img src="/images/htb/passage/23.png" alt="Minion">
<img src="/images/htb/passage/24.png" alt="Minion"></p>
<blockquote>
<p>Not able to decrypt the admin pass (NADAV)</p>
</blockquote>
<p>For Paul User (where is present on the machine /home/)
<img src="/images/htb/passage/25.png" alt="Minion">
<img src="/images/htb/passage/26.png" alt="Minion"></p>
<pre><code>Account found
-------
Username : paul
Password : atlanta1 
</code></pre><p>Now, we got creds and we can try to login into ssh on the machine.</p>
<blockquote>
<p>Access denied by ssh because of public key.</p>
</blockquote>
<p>OK. No problem.
We know that we have an access with the python exploit &ldquo;CuteNews&rdquo;.
We could try to execute the exploit again, &ldquo;su paul&rdquo;, enter the password and see what happend.</p>
<p><img src="/images/htb/passage/27.png" alt="Minion"></p>
<blockquote>
<p>BINGO ! We are logged in with paul user.</p>
</blockquote>
<p>Let&rsquo;s implement SSH public key to the authorized_keys file to get a full shell to the machine.
<img src="/images/htb/passage/28.png" alt="Minion"></p>
<blockquote>
<p>Mmmh&hellip; Strange, we already have a public SSH key for Nadav user who is the admin.
Will take a look on it later.</p>
</blockquote>
<pre><code>Generate a SSH key :
ssh-keygen -t rsa
</code></pre><p><img src="/images/htb/passage/29.png" alt="Minion">
<img src="/images/htb/passage/30.png" alt="Minion">
<img src="/images/htb/passage/31.png" alt="Minion"></p>
<p>Let&rsquo;s try to SSH on 10.10.10.206 :
<img src="/images/htb/passage/32.png" alt="Minion">
<img src="/images/htb/passage/33.png" alt="Minion"></p>
<blockquote>
<p>Well ! Take the user.txt hash and go ahead ! Let&rsquo;s check for SSH key of Nadav.</p>
</blockquote>
<p><img src="/images/htb/passage/34.png" alt="Minion"></p>
<blockquote>
<p>Too simple to get the admin account.
We can see that this user is a member of many groups.
Let&rsquo;s enumerate !</p>
</blockquote>
<pre><code>Enumerate the process 
---------------------
ps -aux
</code></pre><p><img src="/images/htb/passage/36.png" alt="Minion">
<img src="/images/htb/passage/37.png" alt="Minion"></p>
<p>After some googling for USBCREATOR privilege escalation, i find this :
<img src="/images/htb/passage/38.png" alt="Minion">
<img src="/images/htb/passage/39.png" alt="Minion"></p>
<p>Try the command :</p>
<pre><code>gdbus call --system --dest com.ubuntu.USBCreator --object-path /com/ubuntu/USBCreator --method com.ubuntu.USBCreator.Image /root/.ssh/id_rsa /tmp/pwn true
</code></pre><p><img src="/images/htb/passage/40.png" alt="Minion">
<img src="/images/htb/passage/41.png" alt="Minion">
<img src="/images/htb/passage/42.png" alt="Minion">
<img src="/images/htb/passage/43.png" alt="Minion"></p>
<p>This is the end of this box.
ENJOY and KEEP TRY HARDER !</p>
<pre><code>TAGS : 
------
Lot of enumeration, hash decrypt + analyze (Base64 + SHA256)

Knowledge acquiered : 
---------------------
Recognize Base64 and decrypt it with ***base64 -d “KEY”*** command
Find a new tool named CyberChef who can analyze hash type, and decrypt it.
</code></pre>




<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/7own.github.io/js/clipboard.min.js?1600996793"></script>
    <script src="/7own.github.io/js/perfect-scrollbar.min.js?1600996793"></script>
    <script src="/7own.github.io/js/perfect-scrollbar.jquery.min.js?1600996793"></script>
    <script src="/7own.github.io/js/jquery.sticky.js?1600996793"></script>
    <script src="/7own.github.io/js/featherlight.min.js?1600996793"></script>
    <script src="/7own.github.io/js/highlight.pack.js?1600996793"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/7own.github.io/js/modernizr.custom-3.6.0.js?1600996793"></script>
    <script src="/7own.github.io/js/learn.js?1600996793"></script>
    <script src="/7own.github.io/js/hugo-learn.js?1600996793"></script>
    
        
            <script src="/7own.github.io/mermaid/mermaid.js?1600996793"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
