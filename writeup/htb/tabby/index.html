<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.77.0" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Tabby :: 7own</title>

    
    <link href="/css/nucleus.css?1604777773" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1604777773" rel="stylesheet">
    <link href="/css/hybrid.css?1604777773" rel="stylesheet">
    <link href="/css/featherlight.min.css?1604777773" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1604777773" rel="stylesheet">
    <link href="/css/auto-complete.css?1604777773" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1604777773" rel="stylesheet">
    <link href="/css/theme.css?1604777773" rel="stylesheet">
    <link href="/css/hugo-theme.css?1604777773" rel="stylesheet">
    
    <link href="/css/theme-red.css?1604777773" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1604777773"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/writeup/htb/tabby/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="../index.html"><img src="/images/logo.png" alt="7OWN" style="width:200px;height:200px;"></a> 

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1604777773"></script>
<script type="text/javascript" src="/js/auto-complete.js?1604777773"></script>
<script type="text/javascript">
    
        var baseurl = "";
    
</script>
<script type="text/javascript" src="/js/search.js?1604777773"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/basics/" title="Cheatsheet" class="dd-item 
        
        
        
        ">
      <a href="/basics/">
          <b>0. </b>Cheatsheet
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/basics/linux/" title="Linux Cheatsheet" class="dd-item 
        
        
        
        ">
      <a href="/basics/linux/">
          Linux Cheatsheet
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/basics/windows/" title="Windows Cheatsheet" class="dd-item 
        
        
        
        ">
      <a href="/basics/windows/">
          Windows Cheatsheet
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/basics/windows/ps/" title="Powershell" class="dd-item 
        
        
        
        ">
      <a href="/basics/windows/ps/">
          Powershell
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/basics/python/" title="Python" class="dd-item 
        
        
        
        ">
      <a href="/basics/python/">
          Python
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/networking/" title="Networking" class="dd-item 
        
        
        
        ">
      <a href="/networking/">
          <b>1. </b>Networking
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/networking/cisco/" title="Cisco" class="dd-item 
        
        
        
        ">
      <a href="/networking/cisco/">
          Cisco
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/networking/cisco/bgp/" title="BGP" class="dd-item 
        
        
        
        ">
      <a href="/networking/cisco/bgp/">
          BGP
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/networking/cisco/qos/" title="QOS" class="dd-item 
        
        
        
        ">
      <a href="/networking/cisco/qos/">
          QOS
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/networking/cisco/netflow/" title="Netflow" class="dd-item 
        
        
        
        ">
      <a href="/networking/cisco/netflow/">
          Netflow
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/networking/cisco/ipsec/" title="IPSEC" class="dd-item 
        
        
        
        ">
      <a href="/networking/cisco/ipsec/">
          IPSEC
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/networking/fortinet/" title="Fortigate" class="dd-item 
        
        
        
        ">
      <a href="/networking/fortinet/">
          Fortigate
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/networking/fortinet/sdwan/" title="SD-WAN" class="dd-item 
        
        
        
        ">
      <a href="/networking/fortinet/sdwan/">
          SD-WAN
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/networking/fortinet/advpn/" title="AD-VPN" class="dd-item 
        
        
        
        ">
      <a href="/networking/fortinet/advpn/">
          AD-VPN
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/networking/fortinet/debug/" title="Debugging" class="dd-item 
        
        
        
        ">
      <a href="/networking/fortinet/debug/">
          Debugging
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/networking/fortinet/debug/commands/" title="CLI" class="dd-item 
        
        
        
        ">
      <a href="/networking/fortinet/debug/commands/">
          CLI
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/networking/fortinet/debug/fsso/" title="FSSO" class="dd-item 
        
        
        
        ">
      <a href="/networking/fortinet/debug/fsso/">
          FSSO
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/networking/fortinet/debug/ha/" title="HA" class="dd-item 
        
        
        
        ">
      <a href="/networking/fortinet/debug/ha/">
          HA
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/writeup/" title="Write up" class="dd-item 
        parent
        
        
        ">
      <a href="/writeup/">
          <b>2. </b>Write up
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/writeup/htb/" title="HTB" class="dd-item 
        parent
        
        
        ">
      <a href="/writeup/htb/">
          HTB
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/writeup/htb/passage/" title="Passage" class="dd-item 
        
        
        
        ">
      <a href="/writeup/htb/passage/">
          Passage
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/writeup/htb/tabby/" title="Tabby" class="dd-item 
        parent
        active
        
        ">
      <a href="/writeup/htb/tabby/">
          Tabby
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/others/" title="Others" class="dd-item 
        
        
        
        ">
      <a href="/others/">
          <b>4. </b>Others
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/others/github/" title="Github" class="dd-item 
        
        
        
        ">
      <a href="/others/github/">
          Github
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/others/hugo/" title="Hugo help" class="dd-item 
        
        
        
        ">
      <a href="/others/hugo/">
          Hugo help
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="/tags"><i class='fas fa-tags'></i> Tags</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p><b><center>Try harder is the most important thing</center></b></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'>HomePage</a> > <a href='/writeup/'>Write up</a> > <a href='/writeup/htb/'>HTB</a> > Tabby
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents"></nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
<div class="tags">

  <a class="tag-link" href="/tags/lfi">LFI</a>

  <a class="tag-link" href="/tags/tomcat">tomcat</a>

  <a class="tag-link" href="/tags/lxd-privesc">lxd privesc</a>

</div>

        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Tabby
            </h1>
          

        



	<p><img src="/images/htb/tabby/0.png" alt="Minion"></p>
<p>Let&rsquo;s start with NMAP on the IP of the box 10.10.10.194 :
<img src="/images/htb/tabby/1.png" alt="Minion"></p>
<p>As we can see, some interesting protocols:</p>
<pre><code>22 / SSH
80 / HTTP
8080 / TOMCAT
</code></pre><p>Let&rsquo;s check the website :
<img src="/images/htb/tabby/2.png" alt="Minion"></p>
<p>We can observe a call to a file in the url : news.php?file=statement
<img src="/images/htb/tabby/3.png" alt="Minion"></p>
<p>Try LFI, jackpot
<img src="/images/htb/tabby/4.png" alt="Minion">
Find usernames :</p>
<pre><code>ash
lxd
tomcat
</code></pre><p>After google research, i&rsquo;ve find the path of the tomcat-users.xml file</p>
<pre><code>/usr/share/tomcat9/etc/tomcat-users.xml
</code></pre><p><img src="/images/htb/tabby/5.png" alt="Minion"></p>
<p>First user :</p>
<pre><code>tomcat:$3cureP4s5w0rd123!
</code></pre><p>Since we have tomcat admin, we can send a payload to get a reverse shell :
<img src="/images/htb/tabby/6.png" alt="Minion">
<img src="/images/htb/tabby/7.png" alt="Minion"></p>
<p>Upload this payload to Tomcat server
<img src="/images/htb/tabby/8.png" alt="Minion"></p>
<p>And check if the webapp is correctly installed
<img src="/images/htb/tabby/9.png" alt="Minion"></p>
<p>There is time to run the payload and get the reverse shell
<img src="/images/htb/tabby/10.png" alt="Minion"></p>
<p>After some enumeration, we can see backup archive (zip).
We will try to download them and see if we can find something interresting
<img src="/images/htb/tabby/12.png" alt="Minion">
<img src="/images/htb/tabby/13.png" alt="Minion">
<img src="/images/htb/tabby/16.png" alt="Minion"></p>
<p>The archive is protected by a password.
fcrackzip can help us with this</p>
<pre><code>fcrackzip -u -D -p /usr/share/wordlists/rockyou.txt 16162020_backup.zip
</code></pre><p><img src="/images/htb/tabby/18.png" alt="Minion"></p>
<p>I&rsquo;ve checked the backup and there is nothing.
Try to access to ash account.
<img src="/images/htb/tabby/19.png" alt="Minion"></p>
<pre><code>ash:admin@it
</code></pre><p>User pwnd, let&rsquo;s get root.
With &ldquo;id&rdquo; we can see that ash belong to lxd group.
A privesc is possible with it.
<img src="/images/htb/tabby/20.png" alt="Minion"></p>
<pre><code>SOURCES :
https://www.hackingarticles.in/lxd-privilege-escalation/
https://github.com/saghul/lxd-alpine-builder/blob/master/build-alpine
</code></pre><p><img src="/images/htb/tabby/20.png" alt="Minion">
<img src="/images/htb/tabby/21.png" alt="Minion">
<img src="/images/htb/tabby/22.png" alt="Minion">
<img src="/images/htb/tabby/23.png" alt="Minion"></p>
<p>I tried to import lxc image over the reverse shell and it doesn&rsquo;t work.
So i&rsquo;ve create and add /home/ash/.ssh/authorized_keys
<img src="/images/htb/tabby/24.png" alt="Minion">
<img src="/images/htb/tabby/25.png" alt="Minion"></p>
<p>Let&rsquo;s finish the procedure :</p>
<blockquote>
<p>Just for be sure :
<img src="/images/htb/tabby/26.png" alt="Minion"></p>
</blockquote>
<p>Listed command :</p>
<pre><code>lxc init evil default -c security.privileged=true
lxc config device add default mydevice disk source=/ path=/mnt/root recursive=true
lxc start default
lxc exec default /bin/sh
</code></pre><p><img src="/images/htb/tabby/27.png" alt="Minion">
<img src="/images/htb/tabby/28.png" alt="Minion"></p>
<p>The root below is the root of the image.
We&rsquo;ve mount the real root directory, so let&rsquo;s check if we have access to ssh key
<img src="/images/htb/tabby/29.png" alt="Minion"></p>
<p>Getting the root
<img src="/images/htb/tabby/30.png" alt="Minion">
<img src="/images/htb/tabby/31.png" alt="Minion"></p>
<p>This is the end of this box.
ENJOY and KEEP TRY HARDER !</p>
<pre><code>TAGS : 
------
Local file inclusion, lxc and lxd privesc, crack zip, tomcat investigation 

Knowledge acquiered : 
---------------------
Local file inclusion breachs are classics.
LXC and LXD privilege escalation is interesting and the most important part in this box.
First use of Tomcat, learned more about how to deploy and run a webapp.
</code></pre>




<footer class=" footline" >
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1604777773"></script>
    <script src="/js/perfect-scrollbar.min.js?1604777773"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1604777773"></script>
    <script src="/js/jquery.sticky.js?1604777773"></script>
    <script src="/js/featherlight.min.js?1604777773"></script>
    <script src="/js/highlight.pack.js?1604777773"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1604777773"></script>
    <script src="/js/learn.js?1604777773"></script>
    <script src="/js/hugo-learn.js?1604777773"></script>
    
        
            <script src="/mermaid/mermaid.js?1604777773"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
